---
import { type CollectionEntry, getCollection, render } from "astro:content";
import MainLayout from "../../layouts/MainLayout.astro";
import ContentH1 from "../../components/content/ContentH1.astro";
import ContentP from "../../components/content/ContentP.astro";
import { components } from "../../components/ContentComponents.astro";

export type Props = {
    post: CollectionEntry<"blog">;
};

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.id },
        props: { post },
    }));
}

const { post } = Astro.props;
const { data } = post;
const { Content } = await render(post);
---

<MainLayout title={post.data.title}>
    <link
        slot="head"
        rel="alternate"
        type="application/rss+xml"
        title="The House App Blog RSS"
        href="https://the-house-app.com/blog/rss.xml"
    />
    <div class="blog">
        <div class="header">
            <h1>{data.title}</h1>
            <div class="description">{data.description}</div>
        </div>
        <hr />
        <div class="content">
            <Content components={components} />
        </div>
        <!-- <ReleaseFooter v-if="post.type == 'release'" /> -->
        <ContentH1>Bugs and Feedback</ContentH1>
        <ContentP
            >As always, if you notice any bugs or have feedback, please share it
            on the account page.</ContentP
        >
    </div>
</MainLayout>

<style lang="scss">
    .blog {
        width: 80vw;

        .header {
            margin-bottom: 1rem;
            text-align: left;

            .description {
                color: var(--subtext-0);
            }
        }
    }

    hr {
        width: 100%;
    }
</style>
